<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <title>Trang ch·ªß</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
        <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places"></script>
        <script>
            function initAutocomplete() {
                const input = document.getElementById('location');
                const autocomplete = new google.maps.places.Autocomplete(input);
                autocomplete.addListener('place_changed', function () {
                    const place = autocomplete.getPlace();
                    if (place.geometry) {
                        document.getElementById('latitude').value = place.geometry.location.lat();
                        document.getElementById('longitude').value = place.geometry.location.lng();
                    }
                });
            }
        </script>
    <th:book th:replace="base::styles"></th:book>
</head>
<body onload="initAutocomplete()">
    <div th:replace="base :: header"></div>

    <main class="container">

        <form th:action="@{/}" th:object="${job}" method="get" class="mt-4"> 
            <div class="row g-3">
                <div class="col-md-4">
                    <input type="text" class="form-control" th:field="*{title}" placeholder="T·ª´ kh√≥a..."/>
                </div>
                <div class="col-md-4">
                    <select class="form-control" th:field="*{categoryId.id}">
                        <option value="">T·∫•t c·∫£ ng√†nh ngh·ªÅ</option>
                        <option th:each="category : ${categories}"
                                th:value="${category.id}"
                                th:text="${category.name}"></option>
                    </select>
                </div>
                <div class="col-md-4">
                    <input type="text" class="form-control" id="location" th:field="*{location}" placeholder="ƒê·ªãa ƒëi·ªÉm..."/>
                    <!--                    <input type="hidden" id="latitude" th:field="*{latitude}"/>
                                        <input type="hidden" id="longitude" th:field="*{longitude}"/>-->
                </div>
                <div class="col-md-3">
                    <select class="form-control" th:field="*{workingTime}">
                        <option value="">T·∫•t c·∫£ th·ªùi gian</option>
                        <option value="To√†n th·ªùi gian">To√†n th·ªùi gian</option>
                        <option value="B√°n th·ªùi gian">B√°n th·ªùi gian</option>
                        <option value="Cu·ªëi tu·∫ßn">Cu·ªëi tu·∫ßn</option>
                        <option value="Remote">Remote</option>
                    </select>
                </div>
                <div class="col-md-3">
                    <input type="number" class="form-control" th:field="*{salaryFrom}" placeholder="L∆∞∆°ng t·ªëi thi·ªÉu (VNƒê)"/>
                </div>
                <div class="col-md-3">
                    <input type="number" class="form-control" th:field="*{salaryTo}" placeholder="L∆∞∆°ng t·ªëi ƒëa (VNƒê)"/>
                </div>
                <!--                <div class="col-md-3">
                                    <input type="number" class="form-control" th:field="*{radius}" placeholder="B√°n k√≠nh (km)"/>
                                </div>-->
                <div class="col-md-12 mt-3">
                    <button type="submit" class="btn btn-primary">T√¨m ki·∫øm</button>
                </div>
            </div>
        </form>
        <hr />
        <a th:if="${#authorization.expression('hasAuthority(''EMPLOYER'')')}"
           th:href="@{/jobpostings}" class="btn btn-success mt-1">ƒêƒÉng b√†i</a>

        <a th:if="${#authorization.expression('hasAnyAuthority(''EMPLOYER'', ''CANDIDATE'')')}"
           th:href="@{/listapplications}" class="btn btn-success mt-1">Danh s√°ch ·ª©ng tuy·ªÉn</a>

        <a th:if="${#authorization.expression('hasAuthority(''CANDIDATE'')')}"
           th:href="@{/company}" class="btn btn-success mt-1">Danh s√°ch c√¥ng ty</a>

        <a th:if="${#authorization.expression('hasAnyAuthority(''EMPLOYER'', ''CANDIDATE'')')}"
           th:href="@{/users/workedWith}" class="btn btn-success mt-1">ƒê√°nh gi√° ng∆∞·ªùi d√πng</a>

        <a th:if="${#authorization.expression('hasAuthority(''ADMIN'')')}"
           th:href="@{/user}" class="btn btn-success mt-1">Duy·ªát nh√† tuy·ªÉn d·ª•ng</a>

        <a th:if="${#authorization.expression('hasAuthority(''ADMIN'')')}"
           th:href="@{/stats}" class="btn btn-success mt-1">Th·ªëng k√™ b√°o c√°o</a>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th></th>
                    <th>Id</th>
                    <th>Ti√™u ƒë·ªÅ</th>
                    <th>M√¥ t·∫£</th>
                    <th>M·ª©c L∆∞∆°ng t·ªëi thi·ªÉu</th>
                    <th>M·ª©c L∆∞∆°ng t·ªëi ƒëa</th>
                    <th>Th·ªùi gian l√†m vi·ªác</th>
                    <th>ƒê·ªãa ch·ªâ</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="p : ${jobpostings}">
                    <td th:text="${p.id}"></td>
                    <td th:text="${p.title}"></td>
                    <td th:text="${p.description}"></td>
                    <td th:text="${p.skills}"></td>
                    <td th:text="${p.salaryFrom + ' VNƒê'}"></td>
                    <td th:text="${p.salaryTo + ' VNƒê'}"></td>
                    <td th:text="${p.workingTime}"></td>
                    <td th:text="${p.location}"></td>
                    <!--                    <td>
                                            <button th:onclick="'deleleJob(\'' + @{/api/jobpostings} + '\', ' + ${p.id} + ')'" 
                                                    class="btn btn-danger">&times;</button>
                                <butto class="btn btn-danger">&times;</button>
                                    <a th:href="@{'/jobpostings/' + ${p.id}}" class="btn btn-info">&#128296;</a>
                                    </td>-->
                    <td>
                        <button th:if="${#authorization.expression('hasRole(''EMPLOYER'')')}"
                                th:onclick="'deleleJob(\'' + @{/api/jobpostings} + '\', ' + ${p.id} + ')'"
                                class="btn btn-danger">√ó</button>
                        <a th:href="@{'/jobpostings/' + ${p.id}}" class="btn btn-info">üî®</a>
                        <a th:href="@{'/applications/' + ${p.id}}" class="btn btn-info">·ª®ng tuy·ªÉn       </a>

                    </td>
                </tr>
            </tbody>
        </table>
        <!-- Ph√¢n trang -->
        <div>
            <span>Trang: </span>
            <span th:each="p : ${#numbers.sequence(1, totalPages)}">
                <a th:href="@{/page=}+${p}" th:text="${p}" th:class="${currentPage == p} ? 'active' : ''"></a>
            </span>
        </div>
        <div th:if="${jobpostings.isEmpty()}" class="alert alert-info">
            Kh√¥ng t√¨m th·∫•y c√¥ng vi·ªác.
        </div>
    </main>

    <!-- <div th:replace="base :: footer"></div>-->

    <script th:src="@{/js/main.js}"></script> <--<!-- tu vao thu muc tinh luc nay tao de lay thu muc ra  --> 
</body>
</html>


